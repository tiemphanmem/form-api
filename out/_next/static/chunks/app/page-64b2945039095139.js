(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),l=a(2115),n=a(3464),d=a(3508);let c="https://provinces.open-api.vn/api";function i(){let[e,t]=(0,l.useState)({fullName:"",dob:"",oldAddress:"",newAddress:"",citizenId:"",attr:[]}),[a,i]=(0,l.useState)(null),[r,o]=(0,l.useState)(!1),[h,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[p,g]=(0,l.useState)([]),[f,b]=(0,l.useState)(""),[j,v]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[w,C]=(0,l.useState)(""),[k,A]=(0,l.useState)(!1),[S,E]=(0,l.useState)(null),[z,_]=(0,l.useState)(null);(0,l.useEffect)(()=>{n.A.get("".concat(c,"/?depth=1")).then(e=>m(e.data)).catch(e=>console.error("Kh\xf4ng tải được danh s\xe1ch tỉnh",e))},[]),(0,l.useEffect)(()=>{f?n.A.get("".concat(c,"/p/").concat(f,"?depth=2")).then(e=>x(e.data.districts)).catch(e=>console.error("Kh\xf4ng tải được huyện",e)):(x([]),g([]))},[f]),(0,l.useEffect)(()=>{j?n.A.get("".concat(c,"/d/").concat(j,"?depth=2")).then(e=>g(e.data.wards)).catch(e=>console.error("Kh\xf4ng tải được x\xe3",e)):g([])},[j]);let D=a=>{t({...e,[a.target.name]:a.target.value})},q=async a=>{a.preventDefault(),o(!0);try{var s,l,d;let a=k?w:"".concat((null==(s=p.find(e=>e.code==y))?void 0:s.name)||"",", ").concat((null==(l=u.find(e=>e.code==j))?void 0:l.name)||"",", ").concat((null==(d=h.find(e=>e.code==f))?void 0:d.name)||""),c=new FormData,r={...e,oldAddress:a};Object.entries(r).forEach(e=>{let[t,a]=e;Array.isArray(a)?a.forEach(e=>c.append(t,e)):c.append(t,a)}),S&&c.append("imageFront",S),z&&c.append("imageBack",z),await n.A.post("http://localhost:5001/api/forms",c),alert("Gửi th\xe0nh c\xf4ng!"),t({fullName:"",dob:"",oldAddress:"",newAddress:"",citizenId:"",attr:[]}),b(""),v(""),N(""),C(""),A(!1),i(null)}catch(e){console.error(e),alert("Gửi thất bại")}finally{o(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-sky-600 via-sky-300 to-sky-100 flex items-center justify-center py-10 px-4",children:(0,s.jsxs)("div",{className:"max-w-xl w-full bg-white shadow-xl p-8 rounded-2xl space-y-6 border border-gray-100 text-black",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-indigo-700 text-center",children:"Khai b\xe1o địa chỉ h\xe0nh ch\xednh mới"}),(0,s.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Họ t\xean"}),(0,s.jsx)("input",{name:"fullName",value:e.fullName,onChange:D,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ng\xe0y sinh"}),(0,s.jsx)("input",{name:"dob",type:"date",value:e.dob,onChange:D,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Số CCCD"}),(0,s.jsx)("input",{name:"citizenId",value:e.citizenId,onChange:D,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Địa chỉ cũ"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"inline-flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:k,onChange:()=>A(!k),className:"mr-2"}),"Nhập thủ c\xf4ng"]}),k?(0,s.jsx)("input",{type:"text",value:w,onChange:e=>C(e.target.value),placeholder:"Nhập địa chỉ cũ",className:"w-full px-3 py-2 border rounded"}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border rounded",children:[(0,s.jsx)("option",{value:"",children:"Chọn tỉnh"}),h.map(e=>(0,s.jsx)("option",{value:e.code,children:e.name},e.code))]}),(0,s.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border rounded",disabled:!f,children:[(0,s.jsx)("option",{value:"",children:"Chọn huyện"}),u.map(e=>(0,s.jsx)("option",{value:e.code,children:e.name},e.code))]}),(0,s.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border rounded",disabled:!j,children:[(0,s.jsx)("option",{value:"",children:"Chọn x\xe3"}),p.map(e=>(0,s.jsx)("option",{value:e.code,children:e.name},e.code))]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Địa chỉ mới"}),(0,s.jsx)("input",{name:"newAddress",value:e.newAddress,onChange:D,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ảnh đ\xednh k\xe8m ",(0,s.jsx)("span",{className:"text-red-500 font-semibold",children:"(Mặt trước CCCD)"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 border rounded-lg px-4 py-3 bg-white shadow-sm",children:[(0,s.jsx)(d.A,{className:"text-indigo-600",size:20}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&E(e.target.files[0])},className:"flex-1 text-sm text-gray-700 file:hidden focus:outline-none"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ảnh đ\xednh k\xe8m ",(0,s.jsx)("span",{className:"text-red-500 font-semibold",children:"(Mặt sau CCCD)"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 border rounded-lg px-4 py-3 bg-white shadow-sm",children:[(0,s.jsx)(d.A,{className:"text-indigo-600",size:20}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&_(e.target.files[0])},className:"flex-1 text-sm text-gray-700 file:hidden focus:outline-none"})]})]})]}),(0,s.jsx)("button",{type:"submit",disabled:r,className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 w-full",children:r?"Đang gửi...":"Gửi th\xf4ng tin"})]})]})})}},1491:(e,t,a)=>{Promise.resolve().then(a.bind(a,1057))}},e=>{var t=t=>e(e.s=t);e.O(0,[154,441,684,358],()=>t(1491)),_N_E=e.O()}]);