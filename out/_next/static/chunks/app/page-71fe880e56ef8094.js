(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1491:(e,t,a)=>{Promise.resolve().then(a.bind(a,3723))},3723:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(5155),l=a(2115),n=a(3464);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),c=e=>{let t=d(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var h={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:d="",children:c,iconNode:u,...m}=e;return(0,l.createElement)("svg",{ref:t,...h,width:s,height:s,stroke:a,strokeWidth:r?24*Number(n)/Number(s):n,className:i("lucide",d),...!c&&!o(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),m=((e,t)=>{let a=(0,l.forwardRef)((a,s)=>{let{className:n,...d}=a;return(0,l.createElement)(u,{ref:s,iconNode:t,className:i("lucide-".concat(r(c(e))),"lucide-".concat(e),n),...d})});return a.displayName=c(e),a})("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]),p="https://provinces.open-api.vn/api";function x(){let[e,t]=(0,l.useState)({fullName:"",dob:"",oldAddress:"",newAddress:"",citizenId:"",attr:[]}),[a,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),[i,o]=(0,l.useState)([]),[h,u]=(0,l.useState)([]),[x,g]=(0,l.useState)([]),[b,f]=(0,l.useState)(""),[y,j]=(0,l.useState)(""),[v,N]=(0,l.useState)(""),[w,C]=(0,l.useState)(""),[k,A]=(0,l.useState)(!1),[S,E]=(0,l.useState)(null),[z,_]=(0,l.useState)(null);(0,l.useEffect)(()=>{n.A.get("".concat(p,"/?depth=1")).then(e=>o(e.data)).catch(e=>console.error("Kh\xf4ng tải được danh s\xe1ch tỉnh",e))},[]),(0,l.useEffect)(()=>{b?n.A.get("".concat(p,"/p/").concat(b,"?depth=2")).then(e=>u(e.data.districts)).catch(e=>console.error("Kh\xf4ng tải được huyện",e)):(u([]),g([]))},[b]),(0,l.useEffect)(()=>{y?n.A.get("".concat(p,"/d/").concat(y,"?depth=2")).then(e=>g(e.data.wards)).catch(e=>console.error("Kh\xf4ng tải được x\xe3",e)):g([])},[y]);let q=a=>{t({...e,[a.target.name]:a.target.value})},D=async a=>{a.preventDefault(),c(!0);try{var s,l,d;let a=k?w:"".concat((null==(s=x.find(e=>e.code==v))?void 0:s.name)||"",", ").concat((null==(l=h.find(e=>e.code==y))?void 0:l.name)||"",", ").concat((null==(d=i.find(e=>e.code==b))?void 0:d.name)||""),c=new FormData,o={...e,oldAddress:a};Object.entries(o).forEach(e=>{let[t,a]=e;Array.isArray(a)?a.forEach(e=>c.append(t,e)):c.append(t,a)}),S&&c.append("imageFront",S),z&&c.append("imageBack",z),await n.A.post("http://localhost:5001/api/forms",c),alert("Gửi th\xe0nh c\xf4ng!"),t({fullName:"",dob:"",oldAddress:"",newAddress:"",citizenId:"",attr:[]}),f(""),j(""),N(""),C(""),A(!1),r(null)}catch(e){console.error(e),alert("Gửi thất bại")}finally{c(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-sky-600 via-sky-300 to-sky-100 flex items-center justify-center py-10 px-4",children:(0,s.jsxs)("div",{className:"max-w-xl w-full bg-white shadow-xl p-8 rounded-2xl space-y-6 border border-gray-100 text-black",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-indigo-700 text-center",children:"Khai b\xe1o địa chỉ h\xe0nh ch\xednh mới"}),(0,s.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Họ t\xean"}),(0,s.jsx)("input",{name:"fullName",value:e.fullName,onChange:q,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ng\xe0y sinh"}),(0,s.jsx)("input",{name:"dob",type:"date",value:e.dob,onChange:q,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Số CCCD"}),(0,s.jsx)("input",{name:"citizenId",value:e.citizenId,onChange:q,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Địa chỉ cũ"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"inline-flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:k,onChange:()=>A(!k),className:"mr-2"}),"Nhập thủ c\xf4ng"]}),k?(0,s.jsx)("input",{type:"text",value:w,onChange:e=>C(e.target.value),placeholder:"Nhập địa chỉ cũ",className:"w-full px-3 py-2 border rounded"}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("select",{value:b,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border rounded",children:[(0,s.jsx)("option",{value:"",children:"Chọn tỉnh"}),i.map(e=>(0,s.jsx)("option",{value:e.code,children:e.name},e.code))]}),(0,s.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border rounded",disabled:!b,children:[(0,s.jsx)("option",{value:"",children:"Chọn huyện"}),h.map(e=>(0,s.jsx)("option",{value:e.code,children:e.name},e.code))]}),(0,s.jsxs)("select",{value:v,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border rounded",disabled:!y,children:[(0,s.jsx)("option",{value:"",children:"Chọn x\xe3"}),x.map(e=>(0,s.jsx)("option",{value:e.code,children:e.name},e.code))]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Địa chỉ mới"}),(0,s.jsx)("input",{name:"newAddress",value:e.newAddress,onChange:q,required:!0,className:"w-full px-3 py-2 border rounded"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ảnh đ\xednh k\xe8m ",(0,s.jsx)("span",{className:"text-red-500 font-semibold",children:"(Mặt trước CCCD)"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 border rounded-lg px-4 py-3 bg-white shadow-sm cursor-pointer hover:bg-gray-50",children:[(0,s.jsx)(m,{className:"text-indigo-600",size:20}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Chọn ảnh"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&E(e.target.files[0])},className:"hidden"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ảnh đ\xednh k\xe8m ",(0,s.jsx)("span",{className:"text-red-500 font-semibold",children:"(Mặt sau CCCD)"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 border rounded-lg px-4 py-3 bg-white shadow-sm cursor-pointer hover:bg-gray-50",children:[(0,s.jsx)(m,{className:"text-indigo-600",size:20}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Chọn ảnh"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&_(e.target.files[0])},className:"hidden"})]})]})]}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 w-full",children:d?"Đang gửi...":"Gửi th\xf4ng tin"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[464,441,684,358],()=>t(1491)),_N_E=e.O()}]);